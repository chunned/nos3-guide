*Part of [cFE Application Developers Guide](/cFE%20Application%20Developers%20Guide.md)*

# Event Messages
- Event messages are descriptive notices generated by applications in response to commands, software/hardware errors, application-initialization, or other significant events 
- Sent to alert the Flight Operations team that some significant event has occurred
- May also be sent for debugging app code during development, maintenance, and testing
- Can be sent from the main task or child tasks
- Implemented as [Software Bus Messages](./Software%20Bus%20Interface.md)
- Not automatically sent as telemetry; [Telemetry Output](./Telemetry%20Output.md) must be configured to send event messages if they are required for telemetry

# Event Types
- `CFE_EVS_DEBUG`: debug messages for developers; contain references to code; disabled by default
- `CFE_EVS_INFORMATION`: confirm expected behaviour of the flight software. E.g. notification of processing received commands, mode changes, entering/exiting orbit day/night, etc.
- `CFE_EVS_ERROR`: notifications of abnormal behaviour; e.g. erroneous commands, illegal mode change attempts, etc.
- `CFE_EVS_CRITICAL`: notifications of error conditions that flight software is unable to correct/compensate for. E.g. uncorrectable memory errors, hardware failure, etc.

# Event Format
- EVS provides two message formats: long and short
- The format is selected with `CFE_PLATFORM_EVS_DEFAULT_MSG_FORMAT_MODE` config parameter
- Only difference is short format does not include the text string part of the message
	- This makes the uniqueness of Event Message IDs important - unique MIDs allow a message to be understood even in short form when the text is unavailable 

# EVS Registration
- Apps must register with EVS in order to use it
- If an app has registered, all child tasks of that app are also registered and able to send EVS messages
- cFE libraries cannot register or send EVS messages
- Registration is performed with `CFE_EVS_Register` function
	- Input parameters: pointer to an array of event message filters (or NULL for no filtering), number of filters in the input array, and event filtering scheme
	- If this function is called more than once from the same app, it will be unregistered and then re-registered
		- Current filtering states will be lost
	- After app has registered, EVS creates a counter for that app which keeps count of how many times that app has sent events
- See [example](https://github.com/nasa/cFE/blob/main/docs/cFE%20Application%20Developers%20Guide.md#741-binary-filtering-scheme) of binary filtering scheme

# Sending an Event Message
- Event messages are sent with either `CFE_EVS_SendEvent()` or `CFE_EVS_SendTimedEvent()`
	- Both analogous to C's `printf()`

```c
CFE_EVS_SendEvent(EventID, EventType, "Unknown stream on cmd pipe: 0x%04X", sid);
```
- Arguments
	- Event ID of the calling application
		- Defined to be numeric literal used to uniquely identify an app event; defined and supplied to EVS by the app requesting services
	- Event Type
		- Defined to be a numeric literal used to classify an event (see 'Event Types' above)
	- Format string of the event message to be sent
```c
CFE_EVS_SendTimedEvent(PktTime, EventID, EventType, "CSS Data Bad: 0x%04X", CssData);
```
- Arguments
	- Time tag associated with the message
		- With `CFE_EVS_SendEvent`, a time is already associated with the message; this is of use only when you want to override that time
	- Event ID
	- Event type

## Event Message Text
- Message text cannot exceed 122 characters
- There is no fixed text format, but some conventions should be followed
	- Text should not contain unprintable characters
	- No return/line feed characters within the event message
		- Ground system is responsible for message printing/formatting
	- Should always be clear how numerical values are expressed; by default, should be decimal. Hex should be indicated with the `0x` prefix. Binary should use the suffix `B`
	- Floating points should be expressed in exponent format
- Note that event messages are one of the few parts of the flight software that are visible to the users of the software
	- Avoid using software jargon

# Best Practices
- Event Message IDs should be unique across an application, so the event can be identified without text
- "No Operation" command should send an information event message with the application's version number
- Abide by the aforementioned message text conventions
- When sending a critical event message, consider also writing to the ES System Log
- Ensure adequate debug messages are left in an application to allow in-flight debugging